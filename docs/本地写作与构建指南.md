# 客户本地写作与构建指南（2000922.xyz）

本文档用于指导客户从远程仓库拉取项目，在本地运行后新增文章并完成构建发布。

## 1. 项目远程仓库

- 仓库地址：`https://github.com/yy2000922/2000922.xyz`
- 默认分支：`main`

## 2. 首次拉取到本地

```bash
git clone https://github.com/yy2000922/2000922.xyz.git
cd 2000922.xyz
```

## 3. 安装依赖并启动本地预览

```bash
npm install
npm start
```

- `npm start` 实际执行：`eleventy --serve`
- 本地预览地址通常为：`http://localhost:8080`

## 4. 新增文章（核心步骤）

在目录 `src/content/posts/` 下新建 Markdown 文件（可以放到已有分类目录，或新建分类目录）。

示例：

```md
---
title: "你的文章标题"
category: "市场调研基础"
description: "这篇文章的摘要"
# date: 2026-02-13
# categoryOrder: 1
---

正文内容从这里开始。
```

字段说明：

- `title`：可选，文章标题；不填时默认使用文件名
- `category`：建议填写，用于分类归档
- `description`：建议填写，用于列表摘要
- `date`：可选，不填时使用文件修改时间
- `categoryOrder`：可选，分类详情页内排序（数字越小越靠前）

## 5. 新增分类时的处理

如果文章用了新分类，执行：

```bash
npm run sync-meta
```

然后补充分类简介文件：

- `src/content/settings/categoryDescriptions.json`

## 6. 本地构建静态站点

```bash
npm run build
```

该命令会按顺序执行：

1. `npm run clean:site`
2. `npm run sync-meta`
3. `eleventy`
4. `node scripts/optimize-css-safe.js`
5. `node scripts/perf-self-check.js`

构建产物目录：

- `_site/`

## 7. 提交并推送到远程

```bash
git add .
git commit -m "新增：文章标题"
git push origin main
```

## 8. 日常更新仓库（非首次）

```bash
git pull origin main
```

建议每次写文章前先 `git pull`，避免与远程内容冲突。
